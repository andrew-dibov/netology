### task-01

https://hub.docker.com/repository/docker/andrewdibov/custom-nginx/general

### task-02

```bash
sudo docker run -d -p 8080:80 --name dybov.ad-custom-nginxt2 andrewdibov/custom-nginx:1.0.0
sudo docker rename dybov.ad-custom-nginxt2 custom-nginx-t2
date +"%d-%m-%Y %T.%N %Z" ; sleep 0.150 ; sudo docker ps ; ss -tlpn | grep 127.0.0.1:8080 ; sudo docker logs custom-nginx-t2 -n1 ; sudo docker exec -it custom-nginx-t2 base64 /usr/share/nginx/html/index.html
```

### task-03

```bash
sudo docker run -d -p 8080:80 --name custom-nginx-t2 andrewdibov/custom-nginx:1.0.0
sudo docker attach custom-nginx-t2
sudo docker restart custom-nginx-t2
sudo docker exec -it custom-nginx-t2 /bin/bash

sed -i 's/listen\(.*\)80;/listen\181;/g' /etc/nginx/conf.d/default.conf
cat /etc/nginx/conf.d/default.conf | grep listen

nginx -s reload
curl http://127.0.0.1:80 ; curl http://127.0.0.1:81
exit

sudo docker rm custom-nginx-t2 -f
```

#### Attach

1. `docker attach` - подключение к основному процессу контейнера (nginx) 
2. `Ctrl + C` отправляет SIGINT основному процессу, завершая его

#### Порт

- Я поменял слушающий порт Nginx с 80 на 81, но контейнер пробрасывает 80, а не 81

### task-04

```bash
sudo docker run -it -d -v $(pwd):/data --name alma-test almalinux
sudo docker run -it -d -v $(pwd):/data --name deb-test debian

sudo docker exec -it alma-test /bin/bash
echo "hello world a" > /data/text-test-a
exit
echo "hello world b" > text-test-b

sudo docker exec -it deb-test /bin/bash
ls -la /data
cat /data/*
```

### task-05

```bash
sudo docker compose up -d
cd ..
sudo docker build -t custom-nginx:latest .
sudo docker tag custom-nginx:latest localhost:5000/custom-nginx:latest
sudo docker push localhost:5000/custom-nginx:latest
```

#### compose

- приоритет compose.yaml выше docker-compose.yaml
